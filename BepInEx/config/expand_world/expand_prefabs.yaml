##############################################################
# Debug - print player state
#- prefab: Player
#  type: state, *
#  commands: 
#  - s <par>
#  - broadcast center <par>

##############################################################
# Infused creatures drop bezels per zone.
- prefab: creature
  type: destroy
  filter: int, CL&LC infusion, 1;6
  biomes: Meadows
  spawn: Bezel_T1

- prefab: creature
  type: destroy
  filter: int, CL&LC infusion, 1;6
  biomes: Blackforest
  spawn: Bezel_T2

- prefab: creature
  type: destroy
  filter: int, CL&LC infusion, 1;6
  biomes: Swamp, Ocean
  spawn: Bezel_T3

- prefab: creature
  type: destroy
  filter: int, CL&LC infusion, 1;6
  biomes: Mountain
  spawn: Bezel_T4

- prefab: creature
  type: destroy
  filter: int, CL&LC infusion, 1;6
  biomes: Plains
  spawn: Bezel_T5

- prefab: creature
  type: destroy
  filter: int, CL&LC infusion, 1;6
  biomes: Mistlands
  spawn: Bezel_T6

- prefab: creature
  type: destroy
  filter: int, CL&LC infusion, 1;6
  biomes: AshLands, DeepNorth
  spawn: Bezel_T7

##############################################################
# 3 star creatures drop Draumheim Essence (jewelry enchant).
- prefab: creature
  type: destroy
  filter: int, level, 4
  spawn: DraumheimEssence

##############################################################
# 4 star creatures drop Draumheim Essense and Blessed Scrolls per zone.
# Meadows - Weapon
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Meadows
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_F

# Meadows - Armor
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Meadows
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_F

# Black Forest - Weapon
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Blackforest
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_D

# Black Forest - Armor
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Blackforest
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_D

# Swamp, Ocean - Weapon
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Swamp, Ocean
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_C

# Swamp, Ocean - Armor
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Swamp, Ocean
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_C

# Mountain - Weapon
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Mountain
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_B

# Mountain - Armor
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Mountain
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_B

# Plains - Weapon
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Plains
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_A

# Plains - Armor
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Plains
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_A

# Mistlands, Ashlands - Weapon
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Mistlands, AshLands
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_S

# Mistlands, Ashlands - Armor
- prefab: creature
  type: destroy
  weight: 1
  filter: int, level, 5
  biomes: Mistlands, AshLands
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_S

##############################################################
# 5+ star creatures drop Draumheim Essense, Blessed Scrolls per zone, and a Molten Core.
# Meadows - Weapon
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Meadows
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_F
  - MoltenCore

# Meadows - Armor
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Meadows
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_F
  - MoltenCore

# Black Forest - Weapon
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Blackforest
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_D
  - MoltenCore

# Black Forest - Armor
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Blackforest
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_D
  - MoltenCore

# Swamp, Ocean - Weapon
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Swamp, Ocean
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_C
  - MoltenCore

# Swamp, Ocean - Armor
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Swamp, Ocean
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_C
  - MoltenCore

# Mountain - Weapon
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Mountain
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_B
  - MoltenCore

# Mountain - Armor
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Mountain
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_B
  - MoltenCore

# Plains - Weapon
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Plains
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_A
  - MoltenCore

# Plains - Armor
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Plains
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_A
  - MoltenCore

# Mistlands, Ashlands - Weapon
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Mistlands, AshLands
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Weapon_Blessed_S
  - MoltenCore

# Mistlands, Ashlands - Armor
- prefab: creature
  type: destroy
  weight: 1E30
  filter: int, level, 6
  biomes: Mistlands, AshLands
  spawns:
  - DraumheimEssence
  - kg_EnchantScroll_Armor_Blessed_S
  - MoltenCore

##############################################################
# Limit Staff of the Wild summons
# First green root always spawns.
# After first, any additional cast within 50 meters has an
# even chance of no additional spawn or tamed Tenta Root (weaker).
- prefab: staff_greenroots_tentaroot
  type: create
  weight: 1
  swap: TentaRoot, tamed
  objects:
  - staff_greenroots_tentaroot, 50
- prefab: staff_greenroots_tentaroot
  type: create
  weight: 1
  remove: true
  objects:
  - staff_greenroots_tentaroot, 50

#########################################
# Random clothes for creatures
- prefab: Skeleton
  type: create
  weight: 1E30
  data: clothes_skeleton
  poke:
  - prefab: creature
    parameter: gear_buff <float_max_health>
    delay: 0.02
    maxDistance: 0.1

- prefab: Skeleton_Poison
  type: create
  weight: 1E30
  data: clothes_skeleton_poison
  poke:
  - prefab: creature
    parameter: gear_buff <float_max_health>
    delay: 0.02
    maxDistance: 0.1

- prefab: Draugr
  type: create
  weight: 1E30
  data: clothes_draugr
  poke:
  - prefab: creature
    parameter: gear_buff <float_max_health>
    delay: 0.02
    maxDistance: 0.1

- prefab: Draugr_Elite
  type: create
  weight: 1E30
  data: clothes_draugr_elite
  poke:
  - prefab: creature
    parameter: gear_buff <float_max_health>
    delay: 0.02
    maxDistance: 0.1

- prefab: Goblin
  type: create
  weight: 1E30
  data: clothes_goblin
  poke:
  - prefab: creature
    parameter: gear_buff <float_max_health>
    delay: 0.02
    maxDistance: 0.1

- prefab: GoblinBrute
  type: create
  weight: 1E30
  data: clothes_goblin_brute
  poke:
  - prefab: creature
    parameter: gear_buff <float_max_health>
    delay: 0.02
    maxDistance: 0.1

- prefab: DvergerMage
  type: create
  weight: 1E30
  data: clothes_dverger_mage_allied_group

- prefab: Charred_Melee
  type: create
  weight: 1E30
  data: clothes_charred_melee
  poke:
  - prefab: creature
    parameter: gear_buff <float_max_health>
    delay: 0.02
    maxDistance: 0.1

- prefab: Charred_Mage
  type: create
  weight: 1E30
  data: clothes_charred_mage

###############################################################
# Any creature with a shield gets 30% more hp.
# Scales with CLLC stars.
- prefab: creature
  type: poke, gear_buff
  filter: gear_shield
  data: hp_130percent

###############################################################
# Any creature with an offhand weapon deals 30% more dmg.
# Scales with CLLC stars.
- prefab: creature
  type: poke, gear_buff
  filter: gear_dual_wield
  data: dmg_130percent

###############################################################
# Dverger must be grouped with Dverger Mages so they don't agro the skeletons mages can summon.
- prefab: Dverger
  type: create
  weight: 1E30
  data: allied_group_data

# Mages with StaffSkeleton randomly summon skeleton allies.  Skeletons will die to AE.  Oh well.
- prefab: DvergerMage
  type: state, *
  filter: gear_staff_skeleton
  weight: 0.4
  spawn: Skeleton, allied_group_data

###############################################################
# Charred Mages shield themselves on cast if they're holding a StaffShield.
# Shield only has 5 hp, so good for exactly one hit.  1 minute duration.
- prefab: Charred_Mage
  type: state, attack_fireaoe
  filter: gear_staff_shield
  objectRpc:
  - name: RPC_Damage
    1: hit, status=Staff_shield level=1 skill=-39
    delay: 2

###############################################################
# Players shield themselves on secondary attack of any Sanctis.
# Shield has 5 hp and lasts 1 minute.
# Also spawns AE spirit damage.
- prefab: Player
  type: state, staff_summon
  filter: gear_sanctis_t2
  spawn: fx_DvergerMage_Mistile_attack
  delay: 0.2
  poke:
  - prefab: creature
    parameter: spiritAE 20
    maxDistance: 4
    delay: 0.4
  objectRpc:
  - name: RPC_Damage
    1: hit, status=Staff_shield level=1 skill=-39
    delay: 0.3

- prefab: Player
  type: state, staff_summon
  filter: gear_sanctis_t3
  spawn: fx_DvergerMage_Mistile_attack
  delay: 0.2
  poke:
  - prefab: creature
    parameter: spiritAE 30
    maxDistance: 4
    delay: 0.4
  objectRpc:
  - name: RPC_Damage
    1: hit, status=Staff_shield level=1 skill=-39
    delay: 0.3

- prefab: Player
  type: state, staff_summon
  filter: gear_sanctis_t4
  spawn: fx_DvergerMage_Mistile_attack
  delay: 0.2
  poke:
  - prefab: creature
    parameter: spiritAE 40
    maxDistance: 4
    delay: 0.4
  objectRpc:
  - name: RPC_Damage
    1: hit, status=Staff_shield level=1 skill=-39
    delay: 0.3

- prefab: Player
  type: state, staff_summon
  filter: gear_sanctis_t5
  spawn: fx_DvergerMage_Mistile_attack
  delay: 0.2
  poke:
  - prefab: creature
    parameter: spiritAE 50
    maxDistance: 4
    delay: 0.4
  objectRpc:
  - name: RPC_Damage
    1: hit, status=Staff_shield level=1 skill=-39
    delay: 0.3

- prefab: Player
  type: state, staff_summon
  filter: gear_sanctis_t6
  spawn: fx_DvergerMage_Mistile_attack
  delay: 0.2
  poke:
  - prefab: creature
    parameter: spiritAE 60
    maxDistance: 4
    delay: 0.4
  objectRpc:
  - name: RPC_Damage
    1: hit, status=Staff_shield level=1 skill=-39
    delay: 0.3

- prefab: Player
  type: state, staff_summon
  filter: gear_sanctis_t7
  spawn: fx_DvergerMage_Mistile_attack
  delay: 0.2
  poke:
  - prefab: creature
    parameter: spiritAE 70
    maxDistance: 4
    delay: 0.4
  objectRpc:
  - name: RPC_Damage
    1: hit, status=Staff_shield level=1 skill=-39
    delay: 0.3

- prefab: Player
  type: state, staff_summon
  filter: gear_sanctis_t8
  spawn: fx_DvergerMage_Mistile_attack
  delay: 0.2
  poke:
  - prefab: creature
    parameter: spiritAE 80
    maxDistance: 4
    delay: 0.4
  objectRpc:
  - name: RPC_Damage
    1: hit, status=Staff_shield level=1 skill=-39
    delay: 0.3

# spirit AE
- prefab: creature
  type: poke, spiritAE
  spawn: fx_Fader_Roar_Projectile_Hit
  objectRpc:
  - name: RPC_Damage
    1: hit, spirit=<par1>

##############################################################
# All mobs can swim (Raaka) - UNTESTED.  Also, blocks other type: create, like clothing, hence weight: 0.1
- prefab: creature
  type: create
  weight: 0.1
  data: canswim
  fallback: true

##############################################################
# Prevent radiation from Eitr Refinery (credit to Raaka!)
- prefab: radiation
  type: create
  remove: true
  objects:
    - eitrrefinery, 10

##############################################################
# Prevent Lava Rocks close to player, which are stupid frustrating in Ashlands jumping puzzles
- prefab: LavaRock
  type: create
  remove: true
  objects:
    - Player, 5

##############################################################
# Exotic player states
#####################
# Parry
- prefab: sfx_perfectblock
  type: create
  poke:
  - prefab: Player
    limit: 1
    maxDistance: 1
    parameter: PlayerParry

#####################
# Block
- prefab: vfx_blocked
  type: create
  poke:
  - prefab: Player
    limit: 1
    maxDistance: 1
    parameter: PlayerBlock

#####################
# Bow draw
- prefab: sfx_bow_draw
  type: create
  poke:
  - prefab: Player
    limit: 1
    maxDistance: 1
    parameter: PlayerBowDraw

##############################################################
# Results of exotic player states
#####################
# Aegis parry
- prefab: Player
  type: poke, PlayerParry
  filter: aegisShieldList
  spawn: fx_DvergerMage_Mistile_die
  objectRpc:
  - name: RPC_Damage
    1: hit, status=SE_Savheim_Aegis_Eitr_Regen

#####################
# Buckler parry
- prefab: Player
  type: poke, PlayerParry
  filter: bucklerShieldList
#  spawn: fx_redlightning_burst
  spawns:
  - sfx_start_buff_2
  - vfx_ColdBall_launch
  objectRpc:
  - name: RPC_Damage
    1: hit, status=SE_Savheim_BucklerShield_Speed_Burst

#####################
# Round parry
- prefab: Player
  type: poke, PlayerParry
  filter: roundShieldList
  objectRpc:
  - name: RPC_Damage
    1: hit, status=SE_Savheim_RoundShield_Stam_Regen

#####################
# Tower block
- prefab: Player
  type: poke, PlayerBlock
  filter: towerShieldList
  objectRpc:
  - name: RPC_Damage
    1: hit, status=SE_Savheim_TowerShield_HP_Regen

#####################
# Shortbow acrobatics
- prefab: Player
  type: state, jump
  filter: shortBowList
  objectRpc:
  - name: SetTrigger
    target: all
    1: name, dodge
    delay: 0.15

#####################
# Longbow jump shot
- prefab: Player
  type: state, jump
  filter: longBowList
  objectRpc:
  - name: RPC_Damage
    1: hit, status=SE_Savheim_LongbowSkill

##############################################################
##############################################################
# Weapon damage scaling per zone
#- prefab: CWS_Axe_6
###############################################################
## More Rancid Remains
#- prefab: Skeleton
#  type: create
#  weight: 0.1
#  triggerRules: true
#  spawn: Skeleton_Poison
###########################################
## Player weapon animation - THIS IS CRASHING
#- prefab: Player
#  type: state, swing_axe0
#  weight: 1e30
##  spawnDelay: 1
#  data: swordfire
#
#- prefab: Player
#  type: state, swing_axe1
#  weight: 1e30
##  spawnDelay: 1
#  data: normalweapon
##########################################
## Raaka - Turns everything admins say into broadcasts while the adminbroadcast global key is active.
## setkey adminbroadcast
## removekey adminbroadcast
## doesn't work because of World Advancement Progression blocking global keys...
#- prefab: Player
#  type: command, *
#  command: broadcast center <par>
#  globalKeys: adminbroadcast
